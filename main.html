<!DOCTYPE html>

<html>
	<head>
		<script>

			var number=5;
			var count = 1;
			var languageArray = [];
			var htmlArray = [];
			var displayNumber;
			var python = false;
			var json = false;
			var javascript = false;
			var sql = false;


			window.onload = function () {
				/*var form = document.getElementById("resultsForm");
				form.onsubmit = setNumber;*/

				var opt1 = document.getElementById("noResults1");
				var opt2 = document.getElementById("noResults2");
				var opt3 = document.getElementById("noResults3");
				var opt4 = document.getElementById("noResults4");
				var opt5 = document.getElementById("noResults5");

				var opt6 = document.getElementById("results1");
				var opt7 = document.getElementById("results2");
				var opt8 = document.getElementById("results3");
				var opt9 = document.getElementById("results4");

				opt1.onclick = setNumber30;
				opt2.onclick = setNumber60;
				opt3.onclick = setNumber90;
				opt4.onclick = setNumber120;
				opt5.onclick = setNumber150;
				opt6.onclick = setLang1;
				opt7.onclick = setLang2;
				opt8.onclick = setLang3;
				opt9.onclick = setLang4;

				function setNumber30 () {
					displayNumber = 1;
					console.log(number);
				}

				function setNumber60 () {
					displayNumber = 2;
					console.log(number);
				}

				function setNumber90 () {
					displayNumber = 3;
					console.log(number);
				}
			
				function setNumber120 () {
					displayNumber = 4;
					console.log(number);
				}

				function setNumber150 () {
					displayNumber = 5;
					console.log(number);
				}

				function setLang1 () {
					python = true;
					console.log(python);
				}

				function setLang2 () {
					json = true;
					console.log(json);
				}
			
				function setLang3 () {
					javascript = true;
					console.log(javascript);
				}

				function setLang4 () {
					sql = true;
					console.log(sql);
				}

			}
			

			function controlGist() {
				for (var i=0; i<number; i++) {
					openGist();
					count = count + 1;
				}

			}

			function openGist () {

				var url;
				console.log("tiffany");
				var request = new XMLHttpRequest();
				url = 'https://api.github.com/gists' + '?page=' + count;
				console.log(count);
				request.onreadystatechange = ifready;
				request.open('GET', url, true);
				request.send();


				/*for (var i=0; i<number; i++) {
					var request = new XMLHttpRequest();
					url = 'https://api.github.com/gists' + '?page=' + (i+1);
					request.onreadystatechange = ifready;
					request.open('GET', url, true);
					request.send();
					
				}*/
			
			
			/*function ifReady () {
				console.log("Hi");
				/*var data = JSON.parse(request.responseText);
				console.log(data[0].html_url);
			}*/
		
				//request.open('GET', 'https://api.github.com/gists?page=2', true);

				function ifready() {
					if (request.readyState === 4) {
						var data = JSON.parse(request.responseText);
						console.log(data[1].html_url);
						getArray(data);
					}
					//else {
						//document.getElementById("test").innerHTML = "no success!";
					//}
				}
				

			function getArray (input) {
				var parent;
				var fileName;
				for (var i=0; i<input.length; i++) {
					htmlArray.push(input[i].html_url);

					parent = input[i].files;
					for (var property in parent) {
						fileName = property;
					}

					for (var cProp in parent[fileName]) {
						if (cProp === "language") {
							languageArray.push(parent[fileName][cProp]);
						}
					}	

				}
			//console.log (htmlArray.length);

			}
		}

		function displayResults () {
			var dispArea = document.getElementById("results");
			var i = 0
			var alreadyDisplayed = 0;
			var todisplay;
/*
			if (dispArea.hasChildNodes()) {
				var newDisplay = displayNumber + alreadyDisplayed;
			}

			var text;
			for (var z=alreadyDisplayed; z<newDisplay; z++) {
				text = htmlArray[z].toString();
				var newP = document.createElement("p");
				var addText = document.createTextNode(text);
				newP.appendChild(addText);
				dispArea.appendChild(newP);
			}

			alreadyDisplayed = newDisplay;*/
		}



/*
				function getArray (input) {
					var parent = input[0].files;
					for (var prop in parent) {
						var fileName = prop;
					}
					console.log(fileName);
					for (var property in parent[fileName]) {
						if (property === "language") {
							console.log (parent[fileName][property]);
						}
					}
					//for (var i=0; i<input.length; i++) {
						// isolate html_url and the url (before files, count); make array and return it
					//}
				}*/

		</script>
	</head>

	<body>
		<h3>Please 'Connect to Gist' first. Afterwards, select the number of results and click on 'Show Results'.</h3>
		<p>
			<button type = "submit" onClick="controlGist();">Connect to Gists</button>
		</p>
		<p>
			<form id = "resultsForm">
				<legend>Select the Number of Results:</legend>
					<input type="radio" id="noResults1" value="30" name="pick" />
					<label for "noResults">30</label>
					<input type="radio" id="noResults2" value="60" name="pick"/>
					<label for "noResults">60</label>
					<input type="radio" id="noResults3" value="90" name="pick"/>
					<label for "noResults">90</label>
					<input type="radio" id="noResults4" value="120" name="pick"/>
					<label for "noResults">120</label>
					<input type="radio" id="noResults5" value="150" name="pick"/>
					<label for "noResults">150</label>
			</form>
		</p>
		<p>
			<button type = "submit" onClick="displayResults();">Show Results</button>
		</p>
		<p>
			<form>
				<legend>Select a Langauge:</legend>
					<input type="checkbox" value="python" id="results1">Python</input>
					<input type="checkbox" value="json" id="results2">JSON</input>
					<input type="checkbox" value="javascript" id="results3">Javascript</input>
					<input type="checkbox" value="sql" id="results4">SQL</input>
			</form>
		</p>
		<p>
			<button type = "submit" onClick="displayResults();">Search</button>
		</p>
		<div id = "results"></div>
	</body>

</html>